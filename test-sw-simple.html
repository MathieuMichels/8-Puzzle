<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Service Worker Simple</title>
</head>
<body>
    <h1>Test Service Worker Simple</h1>
    <div id="status">Initialisation...</div>
    <button onclick="testSW()">Tester SW</button>

    <script>
        const statusDiv = document.getElementById('status');
        
        function updateStatus(message) {
            console.log(message);
            statusDiv.innerHTML += '<br>' + message;
        }
        
        function testSW() {
            updateStatus('ðŸ”§ Test du Service Worker...');
            
            if ('serviceWorker' in navigator) {
                updateStatus('âœ… Service Worker supportÃ©');
                
                navigator.serviceWorker.register('./service-worker.js', {
                    scope: './'
                })
                .then(registration => {
                    updateStatus('ðŸŽ‰ Service Worker enregistrÃ©!');
                    updateStatus('Scope: ' + registration.scope);
                    updateStatus('Ã‰tat: ' + (registration.active?.state || 'Installation...'));
                    
                    if (registration.installing) {
                        updateStatus('ðŸ“¦ Installation en cours...');
                    }
                    if (registration.waiting) {
                        updateStatus('â³ En attente...');
                    }
                    if (registration.active) {
                        updateStatus('ðŸŸ¢ Actif!');
                    }
                })
                .catch(error => {
                    updateStatus('âŒ Erreur: ' + error.message);
                    console.error('Erreur dÃ©taillÃ©e:', error);
                });
            } else {
                updateStatus('âŒ Service Worker non supportÃ©');
            }
        }
        
        // Test automatique au chargement
        window.addEventListener('load', () => {
            updateStatus('ðŸ“„ Page chargÃ©e');
            testSW();
        });
    </script>
</body>
</html>
